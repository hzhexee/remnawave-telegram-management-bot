# Remnawave Telegram Management Bot

Бот для `Telegram`, предоставляющий административные возможности для управления пользователями и системными ресурсами. С помощью этого бота администраторы могут:

- Создавать новые учетные записи `пользователей`.
- Назначать `пользователей` в доступные `отряды` (squads).
- Генерировать и распространять ссылки на `подписки`.
- Перезагружать `узлы` (nodes).

Этот бот предназначен для использования, когда вы не являетесь продавцом большого масштаба, а скорее энтузиастом самостоятельного хостинга прокси, и хотите управлять некоторыми вещами через Telegram.

> [!IMPORTANT]
> Это простой личный проект, а не крупномасштабный бот, который даёт вам полный контроль над панелью управления.
> Очевидно, что большинство действий (таких как управление отрядами/узлами/метриками) можно выполнять гораздо удобнее через саму панель.

## Безопасность

Бот включает **контроль доступа только для администраторов**. Только пользователи, чьи Telegram ID указаны в переменной окружения `ADMIN_USER_ID`, будут иметь доступ к функциональности бота. Все остальные пользователи получат сообщение "Доступ запрещен".

### Настройка доступа администраторов

Настройте переменную окружения `ADMIN_USER_ID` в вашем `.env` файле:

**Вариант 1: Формат JSON массива (рекомендуется)**
```bash
ADMIN_USER_ID=["123456789", "987654321"]
```

**Вариант 2: Формат через запятую**
```bash
ADMIN_USER_ID=123456789,987654321
```

**Один администратор**
```bash
ADMIN_USER_ID=["123456789"]
# или
ADMIN_USER_ID=123456789
```

Чтобы узнать ваш Telegram ID, вы можете:
1. Написать [@userinfobot](https://t.me/userinfobot) в Telegram
2. Использовать [@RawDataBot](https://t.me/RawDataBot) и отправить любое сообщение
3. Найти поле `"id"` в ответе

### Важные настройки конфигурации

**Настройка локальной сети**
Если ваш бот работает в той же сети, что и панель (например, используя Docker Compose), установите:
```bash
IS_LOCAL_NETWORK=true
```
Это включает правильные заголовки пересылки (`X-Forwarded-Proto` и `X-Forwarded-For`), которые помогают предотвратить проблемы с подключением, такие как "Server disconnected without sending a response."

**Удалённая настройка**
Если ваш бот работает на другом сервере, чем панель, установите:
```bash
IS_LOCAL_NETWORK=false
```

> [!WARNING]
> Убедитесь, что переменная окружения `ADMIN_USER_ID` установлена перед запуском бота, иначе он не запустится.